<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TikTok Clean UI - Auto Next Page</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #fe2c55;
            --white: #fff;
            --text-shadow: 0 1px 3px rgba(0,0,0,0.8);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: #000;
            color: var(--white);
            font-family: 'Proxima Nova', -apple-system, BlinkMacSystemFont, Arial, sans-serif;
            overflow: hidden;
        }
        .app-container {
            position: relative;
            height: 100vh;
            width: 100%;
            max-width: 480px;
            margin: 0 auto;
            background: #000;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            scrollbar-width: none;
        }
        .app-container::-webkit-scrollbar { display: none; }
        
        .video-post {
            position: relative;
            height: 100vh;
            width: 100%;
            scroll-snap-align: start;
            background: #111;
            overflow: hidden;
        }
        .video-player {
            width: 100%;
            height: 100%;
            object-fit: cover;
            cursor: pointer;
        }
        .overlay-gradient {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30%;
            background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
            pointer-events: none;
            z-index: 1;
        }
        .play-icon-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 60px;
            opacity: 0;
            transition: opacity 0.2s;
            pointer-events: none;
            text-shadow: 0 0 10px rgba(0,0,0,0.5);
            z-index: 5;
        }
        
        /* SIDEBAR & INFO AREA */
        .sidebar {
            position: absolute;
            right: 10px;
            bottom: 40px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            z-index: 10;
            align-items: center;
        }
        .sidebar-item { text-align: center; cursor: pointer; }
        .avatar-container { position: relative; margin-bottom: 10px; }
        .avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            border: 1px solid #fff;
            padding: 1px;
            object-fit: cover;
        }
        .add-icon {
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--primary);
            color: #fff;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
        }
        .icon-wrapper {
            font-size: 32px;
            margin-bottom: 4px;
            transition: transform 0.1s;
            text-shadow: var(--text-shadow);
        }
        .icon-wrapper:active { transform: scale(0.85); }
        .liked { color: var(--primary); }
        .count { font-size: 12px; font-weight: 600; text-shadow: var(--text-shadow); }
        
        .info-area {
            position: absolute;
            bottom: 20px;
            left: 10px;
            width: 75%;
            z-index: 10;
            text-shadow: var(--text-shadow);
        }
        .username { font-weight: 700; font-size: 17px; margin-bottom: 8px; display: block; }
        .caption {
            font-size: 15px;
            margin-bottom: 10px;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        .music-note { display: flex; align-items: center; gap: 10px; }
        .marquee-container { width: 150px; overflow: hidden; white-space: nowrap; }
        .marquee-text { display: inline-block; animation: marquee 5s linear infinite; font-size: 14px; }
        @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
        .disc-wrapper {
            width: 45px;
            height: 45px;
            background: #222;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            animation: spin 5s linear infinite;
            background-image: linear-gradient(#333, #111);
            border: 8px solid #222;
        }
        .disc-image { width: 25px; height: 25px; border-radius: 50%; object-fit: cover; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        
        /* Heart Animation */
        .heart-popup {
            position: fixed;
            color: var(--primary);
            font-size: 80px;
            transform: translate(-50%, -50%) rotate(-15deg);
            animation: popUp 0.8s ease-out forwards;
            pointer-events: none;
            z-index: 100;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        @keyframes popUp {
            0% { transform: translate(-50%, -50%) scale(0) rotate(-30deg); opacity: 0; }
            20% { transform: translate(-50%, -50%) scale(1.2) rotate(-15deg); opacity: 1; }
            100% { transform: translate(-50%, -150px) scale(1.5) rotate(0deg); opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="app-container" id="app">
        <!-- Video 1 -->
        <div class="video-post">
            <video class="video-player" loop playsinline src="Download.mp4"></video>
            <div class="play-icon-overlay"><i class="fas fa-play"></i></div>
            <div class="overlay-gradient"></div>
            <div class="info-area">
                <div class="username">@giao_dien_sach</div>
                <div class="caption">Video 1 - Sạch sẽ, mượt mà, không quảng cáo</div>
                <div class="music-note">
                    <i class="fas fa-music"></i>
                    <div class="marquee-container">
                        <div class="marquee-text">Nhạc nền chill - Trending TikTok</div>
                    </div>
                </div>
            </div>
            <!-- Sidebar giống nhau cho mọi video -->
            <div class="sidebar">
                <div class="sidebar-item avatar-container">
                    <img src="https://i.pravatar.cc/100?img=5" class="avatar" alt="User">
                    <div class="add-icon"><i class="fas fa-plus"></i></div>
                </div>
                <div class="sidebar-item" onclick="toggleLike(this)">
                    <div class="icon-wrapper"><i class="fas fa-heart"></i></div>
                    <span class="count">120.5K</span>
                </div>
                <div class="sidebar-item">
                    <div class="icon-wrapper"><i class="fas fa-comment-dots"></i></div>
                    <span class="count">802</span>
                </div>
                <div class="sidebar-item">
                    <div class="icon-wrapper"><i class="fas fa-bookmark"></i></div>
                    <span class="count">450</span>
                </div>
                <div class="sidebar-item">
                    <div class="icon-wrapper"><i class="fas fa-share"></i></div>
                    <span class="count">Share</span>
                </div>
                <div class="sidebar-item disc-wrapper">
                    <img src="https://i.pravatar.cc/100?img=5" class="disc-image">
                </div>
            </div>
        </div>

        <!-- Bạn có thể thêm 4 video nữa giống hệt, chỉ đổi src video và caption -->
        <!-- Ví dụ video 2, 3, 4, 5... -->
        <!-- Ở đây mình chỉ để 1 video mẫu, bạn nhân bản thêm 4 cái nữa -->

        <!-- Video 5 (CUỐI CÙNG) -->
        <div class="video-post" data-last-video="true">
            <video class="video-player" playsinline src="Download.mp4"></video>
            <div class="play-icon-overlay"><i class="fas fa-play"></i></div>
            <div class="overlay-gradient"></div>
            <div class="info-area">
                <div class="username">@giao_dien_sach</div>
                <div class="caption">Video cuối cùng rồi nha! Chuyển trang ngay đây</div>
                <div class="music-note">
                    <i class="fas fa-music"></i>
                    <div class="marquee-container">
                        <div class="marquee-text">End of playlist - See you next!</div>
                    </div>
                </div>
            </div>
            <div class="sidebar">
                <div class="sidebar-item avatar-container">
                    <img src="https://i.pravatar.cc/100?img=12" class="avatar" alt="User">
                    <div class="add-icon"><i class="fas fa-plus"></i></div>
                </div>
                <div class="sidebar-item" onclick="toggleLike(this)">
                    <div class="icon-wrapper"><i class="fas fa-heart"></i></div>
                    <span class="count">99.9K</span>
                </div>
                <!-- Các icon khác giống trên -->
                <div class="sidebar-item"><div class="icon-wrapper"><i class="fas fa-comment-dots"></i></div><span class="count">1.2K</span></div>
                <div class="sidebar-item"><div class="icon-wrapper"><i class="fas fa-bookmark"></i></div><span class="count">888</span></div>
                <div class="sidebar-item"><div class="icon-wrapper"><i class="fas fa-share"></i></div><span class="count">Share</span></div>
                <div class="sidebar-item disc-wrapper">
                    <img src="https://i.pravatar.cc/100?img=12" class="disc-image">
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const videoPosts = document.querySelectorAll('.video-post');
            const container = document.getElementById('app');

            // Tự động phát video hiện trong khung nhìn
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const video = entry.target.querySelector('video');
                    if (entry.isIntersecting) {
                        video.currentTime = 0;
                        video.play().catch(() => {
                            video.muted = true;
                            video.play();
                        });
                    } else {
                        video.pause();
                    }
                });
            }, { threshold: 0.7 });

            videoPosts.forEach(post => observer.observe(post));

            // Xử lý khi video kết thúc
            videoPosts.forEach((post, index) => {
                const video = post.querySelector('video');

                video.addEventListener('ended', () => {
                    // Nếu là video cuối cùng → chuyển trang
                    if (post.hasAttribute('data-last-video')) {
                        // Đổi thành trang bạn muốn chuyển tới
                        window.location.href = "ketthuc.html"; // hoặc https://yourwebsite.com/next
                    } else {
                        // Chuyển sang video tiếp theo bằng scroll mượt
                        const nextPost = videoPosts[index + 1];
                        if (nextPost) {
                            nextPost.scrollIntoView({ behavior: 'smooth' });
                        }
                    }
                });
            });

            // Double tap = like, single tap = pause/play
            videoPosts.forEach(post => {
                const video = post.querySelector('video');
                const playIcon = post.querySelector('.play-icon-overlay');
                let lastClick = 0;

                post.addEventListener('click', (e) => {
                    const now = Date.now();
                    const diff = now - lastClick;

                    if (diff < 300 && diff > 0) {
                        // Double tap → Thả tim + like
                        createHeartAnimation(e.clientX, e.clientY);
                        const likeBtn = post.querySelector('.sidebar-item:nth-child(2)');
                        if (likeBtn) toggleLike(likeBtn, true);
                    } else {
                        // Single tap → Pause/Play
                        setTimeout(() => {
                            if (Date.now() - lastClick >= 300) {
                                if (video.paused) {
                                    video.play();
                                    playIcon.style.opacity = 0;
                                } else {
                                    video.pause();
                                    playIcon.style.opacity = 1;
                                }
                            }
                        }, 300);
                    }
                    lastClick = now;
                });
            });
        });

        function createHeartAnimation(x, y) {
            const heart = document.createElement('div');
            heart.classList.add('heart-popup');
            heart.innerHTML = '<i class="fas fa-heart"></i>';
            heart.style.left = x + 'px';
            heart.style.top = y + 'px';
            document.body.appendChild(heart);
            setTimeout(() => heart.remove(), 800);
        }

        function toggleLike(element, forceLike = false) {
            const icon = element.querySelector('.icon-wrapper i');
            const wrapper = element.querySelector('.icon-wrapper');
            if (forceLike || !wrapper.classList.contains('liked')) {
                wrapper.classList.add('liked');
                wrapper.style.transform = 'scale(1.3)';
                setTimeout(() => wrapper.style.transform = 'scale(1)', 200);
            } else {
                wrapper.classList.remove('liked');
            }
        }
    </script>
</body>
</html>
